{% extends "layout.html" %}
{% block body %}
<script type="text/javascript">
  $(function(name) {
    var submit_form = function(e) {
      $.getJSON($SCRIPT_ROOT + '/' + name,
      function(data) {
        $('#arrays').text(data.result);
        $('input[name=a]').focus().select();
      });
      return false;
    };

    $('a#anlage3').bind('click', submit_form);

    $('input[type=text]').bind('keydown', function(e) {
      if (e.keyCode == 13) {
        submit_form(e);
      }
    });

    $('input[name=a]').focus();
  });
</script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
      google.charts.load('current', {'packages':['gauge', 'corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Außen', 11],
          ['Innen', 20],
          ['Soll', 21]
        ]);

        var options = {
          width: 400, height: 80,
          minorTicks: 5,
	  greenFrom: 15, greenTo: 25,
	  animation:{
		  duration:2000,
		  easing:'linear',
	  },
	  max:40,
	  min:-10
        };

        var chart = new google.visualization.Gauge(document.getElementById('gauge'));

        chart.draw(data, options);

        setInterval(function() {
          data.setValue(0, 1, 5 + Math.round(20 * Math.random()));
          chart.draw(data, options);
        }, 5000);
        setInterval(function() {
          data.setValue(1, 1, 5 + Math.round(20 * Math.random()));
          chart.draw(data, options);
        }, 4000);
        setInterval(function() {
          data.setValue(2, 1, 10 + Math.round(5 * Math.random()));
          chart.draw(data, options);
        }, 10000);



      $.getJSON('\\Temperatures', function(data) {
          var tableData = new google.visualization.DataTable();

          tableData.addColumn('string', 'Day');
          tableData.addColumn('number', 'Temperature');
          tableData.addColumn('number', 'Energy');

          $.each(data, function(index) {
              tableData.addRow([
		data[index].day,
                parseFloat(data[index].temperature),
                parseFloat(data[index].energy)
            ]);
          });



          var materialOptions = {
            chart: {
              title: 'Temperature and Energy Graph'
            },
            width: 900,
            height: 500,
            series: {
              // Gives each series an axis name that matches the Y-axis below.
              0: {axis: 'Temperature (in °C)'},
              1: {axis: 'Energy'},
            },
           vAxes: {
                  0: {}, 
                  1: {viewWindowMode:'explicit',
                      viewWindow:{
                                  max:0.1,
                                  min:0
                                  },
                      gridlines: {color: 'transparent'},
                      },
                  },
              series: {0: {targetAxisIndex:0},
                   1:{targetAxisIndex:1},
                   2:{targetAxisIndex:1},
                  },
            axes: {
              // Adds labels to each axis; they don't have to match the axis names.
              y: {
                Temperature: {label: 'Temperature (in °C)'},
                Energy: {label: 'Energy'}
              }
            }
          };
 
          // Instantiate and draw our chart, passing in some options.
          var chart = new google.visualization.LineChart(document.getElementById('vorhersage'));
          chart.draw(tableData, materialOptions);
          });
      }
</script>


<div id="header">
	<h1 style="float:left">Heating Manager</h1>
	<div id="gauge"></div>
	<img id="logo" src="static/Viessmann_Logo.jpg">
</div>
<div id="nav">
<input class="burger-check" id="burger-check" type="checkbox">
<label for="burger-check" class="burger"></label>
<nav id="navigation1" class="navigation">
  <ul>
    <li><a href="#">Start</a></li>
    <li><a href="vorhersage.html">Vorhersage</a></li>
    <li><a href="#">Zielrechner</a></li>
    <li><a href="#">Raumkonfigurator</a></li>
    <li><a href="#">Heizverhalten</a></li>
  </ul>
</nav>
<div id="vorhersage"></div>
</div>

{% endblock %}
